<script setup>
import { ref } from "vue";
import { use } from "echarts/core";
import { CanvasRenderer } from "echarts/renderers";
import { PieChart, LineChart } from "echarts/charts";
import { UniversalTransition } from "echarts/features";
import {
  TitleComponent,
  ToolboxComponent,
  TooltipComponent,
  GridComponent,
  LegendComponent,
  DataZoomComponent,
} from "echarts/components";
import VChart from "vue-echarts";
import { x, y } from "../../assets/data/shuikurong";
const emit = defineEmits(["close"]);
const props = defineProps(["visible"]);
use([
  CanvasRenderer,
  PieChart,
  TitleComponent,
  ToolboxComponent,
  TooltipComponent,
  GridComponent,
  LegendComponent,
  DataZoomComponent,
  LineChart,
  UniversalTransition,
]);
const onClose = () => {
  emit("close");
};
const option2 = ref({
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  toolbox: {
    feature: {
      dataZoom: {
        yAxisIndex: "none",
      },
      restore: {},
      saveAsImage: {},
    },
  },
  axisPointer: {
    link: [
      {
        xAxisIndex: "all",
      },
    ],
  },
  dataZoom: [
    {
      show: true,
      realtime: true,
      start: 30,
      end: 70,
      xAxisIndex: [0, 1],
    },
    {
      type: "inside",
      realtime: true,
      start: 30,
      end: 70,
      xAxisIndex: [0, 1],
    },
  ],
  grid: {
    left: "12%",
    right: "15%",
    bottom: "20%",
  },
  xAxis: {
    // type: "category",
    boundaryGap: false,
    name: "水量万m³",
    axisLine: { onZero: true },
    data: x,
  },
  yAxis: {
    name: "水位m",
    type: "value",
    min: 185,
    max: 215,
  },

  series: {
    name: "库容",
    type: "line",
    symbolSize: 8,
    // prettier-ignore
    data: y,
  },
});
const option1 = ref({
  // title: {
  //   text: "丰乐水库泄洪洞泄量曲线",
  // },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  legend: {
    data: ["e=1米", "e=2米", "e=3米", "e=4米", "e=5米", "全开"],
  },
  grid: {
    left: "3%",
    right: "10%",
    bottom: "3%",
    containLabel: true,
  },
  toolbox: {
    feature: {
      saveAsImage: {},
    },
  },
  xAxis: {
    type: "value",
    boundaryGap: false,
    name: "流量m³/s",
    interval: 100, // 步长
    max: 900,
    min: 0,
  },
  yAxis: {
    type: "value",
    name: "水位m",
    max: 210,
    min: 190,
  },
  series: [
    {
      name: "e=1米",
      type: "line",
      data: [
        [0.93194, 190.26809],
        [9.03106, 190.59937],
        [19.46646, 190.98163],
        [49.68239, 192.97572],
        [79.89833, 196.44786],
        [92.67001, 198.53752],
        [106.68772, 201.10499],
        [129.8948, 205.571],
        [147.1833, 209.03677],
        [149.51959, 209.98603],
      ],
      smooth: true,
    },
    {
      name: "e=2米",
      type: "line",
      data: [
        [49.68239, 192.02645],
        [70.55319, 192.50427],
        [90.33373, 192.97572],
        [120.54967, 194.92522],
        [183.31782, 199.48678],
        [204.18862, 201.62741],
        [251.84881, 206.61583],
        [277.39218, 209.51459],
        [280.81873, 209.98603],
      ],
      smooth: true,
    },
    {
      name: "e=3米",
      type: "line",
      data: [
        [161.201, 195.11634],
        [170.54614, 195.44763],
        [205.27889, 196.97028],
        [252.93908, 199.48678],
        [302.93555, 202.67224],
        [323.80635, 204.14392],
        [345.76742, 205.61559],
        [375.98336, 208.08751],
        [398.10018, 209.98603],
      ],
      smooth: true,
    },
    {
      name: "e=4米",
      type: "line",
      data: [
        [191.41694, 194.92522],
        [241.25766, 195.97004],
        [291.25413, 197.53729],
        [332.99574, 199.10453],
        [384.08247, 201.24515],
        [414.29841, 202.7678],
        [453.85948, 204.71093],
        [472.394, 205.71116],
        [531.57985, 209.08774],
        [545.59756, 209.98603],
      ],
      // smooth: true,
    },
    {
      name: "e=5米",
      type: "line",
      data: [
        [241.25766, 196.01464],
        [313.37095, 197.01487],
        [363.21167, 198.0597],
        [413.20814, 199.62694],
        [443.42408, 200.76734],
        [473.64002, 201.76757],
        [511.95507, 203.23925],
        [560.70552, 205.18874],
        [583.91261, 206.18898],
        [646.52501, 209.03677],
        [665.21528, 209.94144],
      ],
      smooth: true,
    },
    {
      name: "全开",
      type: "line",
      data: [
        [313.37095, 197.01487],
        [364.45769, 197.82398],
        [393.42761, 198.3018],
        [482.8294, 199.81807],
        [523.48074, 200.72274],
        [572.23119, 201.672],
        [640.76218, 203.19465],
        [679.07723, 204.23948],
        [708.2029, 205.18874],
        [768.47902, 207.18284],
        [813.80293, 208.84564],
        [841.68258, 209.98603],
      ],
      smooth: true,
    },
  ],
});
const option3 = ref({
  // title: {
  //   text: "丰乐水库泄洪洞泄量曲线",
  // },
  // tooltip: {
  //   trigger: "axis",
  // },
  // legend: {
  //   data: [
  //     "e=1米",
  //     "e=2米",
  //     "e=3米",
  //     "e=4米",
  //     "e=5米",
  //     "全开",
  //     "7",
  //     "8",
  //     "9",
  //     "10",
  //     "11",
  //     "12",
  //     "13",
  //   ],
  // },
  grid: {
    left: "3%",
    right: "12%",
    bottom: "3%",
    containLabel: true,
  },
  toolbox: {
    feature: {
      saveAsImage: {},
    },
  },
  xAxis: {
    type: "value",
    boundaryGap: false,
    interval: 1000, // 步长
    name: "功率kw",
    nameTextStyle: {
      nameLocation: "top",
    },
    max: 7000,
    min: 0,
  },
  yAxis: {
    type: "value",
    name: "水位m",
    max: 45,
    min: 21,
  },
  series: [
    {
      name: "1",
      type: "line",
      data: [
        [1538.51477, 23.00392],
        [1580.81866, 25.00944],
        [1629.3898, 27.01496],
        [1692.06223, 28.98914],
        [1771.96958, 31.01032],
        [1887.91358, 33.01584],
        [2019.52569, 35.02136],
        [2151.13779, 36.97987],
        [2083.76493, 36.03979],
        [1952.15282, 34.03427],
        [1825.24115, 32.06009],
        [1723.39845, 30.00757],
        [1662.29283, 28.00205],
        [1602.75402, 26.02787],
        [1558.88331, 23.99101],
        [1527.5471, 21.98549],
        [1549.48245, 20.98274],
      ],
      smooth: true,
    },
    {
      name: "2",
      type: "line",
      data: [
        [1779.80364, 20.9984],
        [1745.3338, 22.00116],
        [1737.49974, 22.98825],
        [1750.03423, 24.00668],
        [1775.1032, 25.02511],
        [1803.3058, 26.02787],
        [1833.0752, 27.01496],
        [1864.41142, 28.00205],
        [1895.74763, 29.03614],
        [1931.78428, 30.00757],
        [1974.08817, 31.02599],
        [2032.06017, 32.02875],
        [2090.03217, 33.01584],
        [2152.7046, 34.0186],
        [2218.51066, 35.00569],
        [2290.58395, 36.00845],
        [2362.65725, 37.02688],
        [2434.73055, 38.02964],
        [2516.20471, 39.00106],
        [2594.54525, 39.97248],
        [2677.58622, 41.00658],
        [2766.89444, 41.99367],
      ],
      smooth: true,
    },
    {
      name: "3",
      type: "line",
      data: [
        [1972.7961, 21.00134],
        [1982.05008, 21.99945],
        [2003.20202, 22.99756],
        [2008.49001, 23.57923],
        [1991.96505, 23.99566],
        [1996.59204, 25.00699],
        [2008.49001, 25.99849],
        [2032.28595, 26.9966],
        [2072.5334, 27.98516],
        [2118.36261, 28.984],
        [2153.61586, 30.00634],
        [2199.44507, 30.99343],
        [2260.55069, 32.00403],
        [2322.24387, 33.01168],
        [2392.75036, 33.99877],
        [2468.54483, 35.00349],
        [2547.86462, 35.99939],
        [2633.35374, 36.98648],
        [2725.01217, 37.98239],
        [2823.72125, 39.00473],
        [2921.549, 39.98301],
        [3024.66473, 40.99654],
        [3127.78047, 41.98363],
      ],
      smooth: true,
    },
    {
      name: "4",
      type: "line",
      data: [
        [2174.42846, 21.0037],
        [2192.27542, 21.9952],
        [2215.07986, 22.9867],
        [2226.48208, 23.99307],
        [2233.91831, 24.99448],
        [2247.06483, 26.00397],
        [2263.51635, 26.97931],
        [2268.21678, 27.60212],
        [2276.44254, 27.97815],
        [2314.04599, 28.98874],
        [2358.7001, 29.96408],
        [2413.93018, 30.98643],
        [2476.21091, 32.00877],
        [2545.54229, 33.01937],
        [2619.5741, 34.00646],
        [2700.65656, 35.0053],
        [2788.52853, 35.99369],
        [2884.10399, 37.01212],
        [2978.11264, 37.98354],
        [3086.22258, 38.9863],
        [3195.89934, 40.00473],
        [3308.70971, 40.97615],
        [3432.48777, 41.96324],
      ],
      // smooth: true,
    },
    {
      name: "5",
      type: "line",
      data: [
        [2328.16059, 21.00467],
        [2329.04192, 21.33076],
        [2359.00718, 22.02701],
        [2383.68445, 22.547],
        [2401.31107, 23.02292],
        [2418.05636, 24.01001],
        [2433.92032, 24.53],
        [2456.83493, 25.01473],
        [2511.47745, 25.993],
        [2568.76397, 27.00654],
        [2623.4065, 28.02007],
        [2680.69302, 29.01597],
        [2732.69155, 30.01187],
        [2783.80875, 31.00778],
        [2832.28196, 31.98606],
        [2886.04316, 33.0084],
        [2953.02432, 34.0043],
        [3042.92009, 35.02665],
        [3131.93453, 35.99611],
        [3236.81293, 37.00083],
        [3341.69132, 37.98792],
        [3455.38303, 38.97501],
        [3584.547, 40.00715],
        [3723.99316, 40.97857],
        [3866.57294, 41.997],
      ],
      smooth: true,
    },
    {
      name: "6",
      type: "line",
      data: [
        [2485.87049, 21.2887],
        [2500.85312, 21.67649],
        [2521.12374, 22.02902],
        [2558.13964, 22.60189],
        [2581.05425, 23.0073],
        [2625.1208, 23.98558],
        [2648.03541, 24.55844],
        [2663.01804, 24.98148],
        [2674.47534, 25.43096],
        [2704.4406, 25.99501],
        [2763.48978, 26.99092],
        [2830.47094, 28.00445],
        [2906.26542, 28.98272],
        [2986.46654, 30.00507],
        [3064.90501, 31.00979],
        [3143.34347, 31.99688],
        [3223.5446, 32.99278],
        [3299.33907, 33.9975],
        [3382.18419, 34.9934],
        [3479.13061, 35.99812],
        [3533.77314, 36.5181],
        [3588.41567, 36.98521],
        [3717.09, 38.02518],
        [3845.76434, 38.98583],
        [3977.964, 39.99055],
        [4120.73963, 40.98645],
        [4249.41397, 41.72677],
        [4289.07387, 41.96473],

        // [2501.70181, 21.22312],
        // [2536.07372, 21.17685],
        // [2622.6645, 21.42803],
        // [2706.61129, 21.75192],
        // [2776.01611, 22.03615],
        // [3178.35734, 24.00946],
        // [3250.18583, 24.3686],
        // [3391.74963, 25.03235],
        // [3498.44577, 25.53141],
        // [3600.90051, 25.99962],
        // [3751.27762, 26.72782],
        // [3818.14862, 27.04124],
        // [3999.26215, 27.89668],
        // [4133.62842, 28.53467],
        // [4247.65063, 29.09651],
        // [4497.41159, 30.27901],
        // [4445.38552, 30.01076],
        // [4745.61646, 31.42116],
        // [4877.26528, 32.00505],
        // [4995.19496, 32.57973],
        // [5100.16286, 33.04722],
        // [5324.02096, 34.0255],
        // [5453.57662, 34.63361],
        // [5547.87905, 35.03021],
        // [5751.46653, 35.92917],
        // [5877.49687, 36.51085],
        // [5992.06991, 37.0044],
        // [2903.64153, 22.66134],
        // [3000.93996, 23.13609],
      ],
      smooth: true,
    },
    {
      name: "7",
      type: "line",
      data: [
        [4721.39723, 41.98838],
        [4614.8541, 41.40866],
        [4500.47691, 40.76626],
        [4370.43162, 40.0142],
        [4248.22037, 39.24646],
        [4122.87551, 38.44738],
        [4058.63627, 38.00868],
        [4000.66427, 37.58564],
        [3916.05649, 36.99025],
        [3784.44438, 36.01883],
        [3655.96589, 35.01607],
        [3544.72233, 34.04465],
        [3486.75033, 33.51193],
        [3441.31281, 33.04189],
        [3350.43779, 32.07046],
        [3261.12957, 31.0207],
        [3217.25887, 30.44098],
        [3196.89033, 30.01794],
        [3154.58644, 29.34421],
        [3135.78471, 29.03085],
        [3063.71141, 28.01242],
        [2986.93768, 27.00967],
        [2911.73076, 26.00691],
        [2842.79109, 25.01982],
        [2770.71779, 24.03273],
        [2747.21563, 23.73503],
        [2706.47855, 23.24932],
        [2689.24363, 23.0143],
        [2668.87509, 22.7166],
        [2667.30828, 22.34057],
        [2701.77812, 22.12122],
        [2769.15098, 22.3249],
        [2875.69412, 22.7166],
        [2950.90103, 23.0613],
        [3001.03898, 23.28066],
        [3160.85368, 24.0262],
        [3250.1619, 24.46099],
        [3365.32249, 25.02504],
        [3495.75949, 25.64785],
        [3568.61619, 26.01213],
        [3749.58284, 26.88171],
        [3976.3787, 27.99806],
        [4187.89816, 29.02041],
        [4393.54208, 30.0075],
        [4599.18599, 31.01809],
        [4749.59983, 31.69965],
        [4999.89785, 32.88651],
        [5237.26969, 34.02637],
        [5449.96425, 35.00171],
        [5500.4939, 35.24848],
        [5669.70947, 36.0123],
        [5750.79193, 36.38833],
        [5997.56463, 37.51644],
      ],
      smooth: true,
    },

    {
      name: "8",
      type: "line",
      data: [
        // [4142.85718, 29.02529],
        // [4249.93891, 29.54087],
        // [4348.42766, 30.01679],
        // [4555.98112, 31.00829],
        // [4747.00963, 31.93369],
        // [4998.18899, 33.14992],
        // [5182.60752, 34.02244],
        // [5388.17799, 35.00733],
        // [5500.5477, 35.54274],
        // [5749.74406, 36.73914],
        // [5997.61843, 37.92894],
        [5091.16942, 41.99041],
        [4919.60364, 40.99157],
        [4748.03785, 40.01623],
        [4587.04804, 38.99094],
        [4499.79627, 38.44452],
        [4431.93378, 38.01267],
        [4274.17551, 37.01676],
        [4249.49824, 36.8405],
        [4122.58657, 36.01205],
        [4000.96288, 35.16597],
        [3852.01793, 34.03786],
        [3751.54619, 33.23585],
        [3599.07591, 32.01962],
        [3479.21489, 30.99727],
        [3371.69249, 30.01018],
        [3275.62741, 29.02309],
        [3214.81556, 28.30921],
        [3186.61297, 27.99193],
        [3109.05584, 27.0401],
        [3035.68502, 26.00453],
        [2960.99222, 25.02625],
        [2910.75634, 24.29916],
        [2900.84137, 23.98849],
        [2894.23139, 23.38037],
        [2915.38333, 23.27461],
        [2998.66912, 23.53901],
        [3118.30981, 24.02815],
        [3249.84847, 24.62304],
        [3498.38384, 25.85911],
        [3750.88519, 27.11501],
        [4000.74255, 28.33786],
      ],
      smooth: true,
    },
    {
      name: "9",
      type: "line",
      data: [
        [5450.67338, 41.99056],
        [5248.90365, 40.90487],
        [4901.88566, 39.00126],
        [4729.53647, 37.96717],
        [4583.82307, 37.02708],
        [4496.08167, 36.4787],
        [4253.22599, 34.92755],
        [4115.34664, 34.0188],
        [4000.96945, 33.21973],
        [3833.3207, 32.04462],
        [3747.14611, 31.35522],
        [3703.2754, 31.01053],
        [3595.16546, 30.0391],
        [3498.02319, 29.06768],
        [3397.7473, 28.01792],
        [3360.14384, 27.51654],
        [3336.64168, 27.07783],
        [3316.27314, 26.52945],
        [3316.27314, 26.21608],
        [3355.44341, 26.10641],
        [3394.61368, 26.16908],
        [3498.02319, 26.49811],
        [3604.56632, 26.92115],
        [3750.27973, 27.56354],
        [3848.98881, 28.01792],
        [3999.40264, 28.75432],
        [4254.7928, 30.0391],
        [4497.64848, 31.21421],
        [4748.3382, 32.45199],
        [4999.02793, 33.6271],
        [5246.58404, 34.81788],
        [5503.54101, 36.03999],
        [5751.09711, 37.23076],
        [5997.08641, 38.40587],
      ],
      smooth: true,
    },
    {
      name: "10",
      type: "line",
      data: [
        [5800.07446, 41.99508],
        [5616.7576, 41.00799],
        [5425.21498, 40.00915],
        [5246.59854, 39.05731],
        [5059.75636, 38.02321],
        [4886.4932, 37.01784],
        [4749.00555, 36.13651],
        [4573.91444, 35.03191],
        [4425.85082, 34.00957],
        [4284.83785, 33.04598],
        [4135.59912, 32.02363],
        [4058.04199, 31.40083],
        [4003.98702, 30.84853],
        [3901.75261, 30.0142],
        [3864.14915, 29.66167],
        [3857.0985, 29.42664],
        [3880.60067, 29.22688],
        [3905.27794, 29.17987],
        [3961.68312, 29.33264],
        [4055.69177, 29.70867],
        [4128.54847, 30.0142],
        [4247.23439, 30.57825],
        [4344.76836, 31.02479],
        [4496.35731, 31.72986],
        [4555.11271, 32.02363],
        [4750.18066, 32.97547],
        [4968.75076, 34.02132],
        [5183.79555, 35.00841],
        [5385.91414, 36.00725],
        [5502.24984, 36.53605],
        [5595.08338, 37.00609],
        [5792.50154, 37.99318],
        [5994.62013, 39.00378],
      ],
      smooth: true,
    },
    {
      name: "11",
      type: "line",
      data: [
        [2906.23277, 22.65088],
        [2993.48455, 23.07392],
        [2568.75941, 21.01445],
        [2673.65158, 21.5292],
        [2769.95077, 21.96794],
        [3248.47223, 24.2397],
        [3420.24917, 25.02423],
        [3498.7014, 25.3886],
        [3638.50254, 26.03927],
        [3753.76412, 26.57096],
        [3853.78143, 27.02457],
        [4001.39061, 27.71986],
        [4250.50435, 28.8353],
        [4500.36171, 29.96932],
        [4748.76281, 31.05408],
        [4999.61166, 32.17447],
        [5248.47752, 33.28991],
        [5500.81363, 34.39543],
        [5750.17524, 35.50095],
        [5998.0496, 36.56681],
      ],
      smooth: true,
    },
    {
      name: "12",
      type: "line",
      data: [
        [3001.21755, 23.06106],
        [3199.39311, 24.00546],
        [2576.52812, 21.02223],
        [2674.80256, 21.50791],
        [2771.21794, 21.95129],
        [2907.99811, 22.62474],
        [3250.16945, 24.21712],
        [3421.81277, 25.00193],
        [3500.08491, 25.37055],
        [3639.53167, 26.01837],
        [3754.97915, 26.55012],
        [3855.05455, 27.00344],
        [4003.05007, 27.69362],
        [4251.98371, 28.81071],
        [4502.01536, 29.92911],
        [4751.21043, 31.01311],
        [5002.55503, 32.11739],
        [5248.41542, 33.20401],
        [5502.73451, 34.31666],
        [5751.47644, 35.38747],
        [5999.66065, 36.44714],
      ],
      smooth: true,
    },
    {
      name: "13",
      type: "line",
      data: [
        [2581.16177, 21.00867],
        [2676.11315, 21.48761],
        [2772.73767, 21.93517],
        [2909.93613, 22.59607],
        [3003.84179, 23.02691],
        [3197.92741, 23.8823],
        [3255.65116, 24.14583],
        [3426.94009, 24.91966],
        [3506.20566, 25.28775],
        [3615.53569, 25.78238],
        [3645.02499, 25.91571],
        [3760.19362, 26.43659],
        [3860.58273, 26.89764],
        [4010.7946, 27.54831],
        [4260.46605, 28.66281],
        [4507.81368, 29.73363],
        [4759.06534, 30.83233],
        [5011.99014, 31.93104],
        [5260.45321, 32.99767],
        [5512.21029, 34.05855],
        [5750.98495, 35.09144],
        [5999.35507, 36.13746],
      ],
      smooth: true,
    },
  ],
});
</script>
<template>
  <a-drawer
    title="特征曲线"
    :width="840"
    :visible="props.visible"
    :body-style="{ paddingBottom: '80px' }"
    :footer-style="{ textAlign: 'right' }"
    @close="onClose"
  >
    <a-tabs>
      <a-tab-pane key="1" tab="丰乐水库泄洪洞泄量曲线">
        <v-chart class="chart" :option="option1"></v-chart
      ></a-tab-pane>
      <a-tab-pane key="2" tab="水库库容曲线">
        <v-chart class="chart" :option="option2"></v-chart
      ></a-tab-pane>
      <a-tab-pane key="3" tab="水轮机运转特性曲线">
        <v-chart class="chart" :option="option3"></v-chart
      ></a-tab-pane>
    </a-tabs>
  </a-drawer>
</template>
<style scoped>
.chart {
  width: 700px;
  height: 500px;
  margin: 0 auto;
}
.sel-wrap {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 999;
}
</style>
